#:kivy 1.0

<UserMain>:
	name: 'UserMain'
	
	FloatLayout:
		orientation: 'horizontal'
		Button:
			size_hint: None, None
			size: 250, 50
			pos: root.width - self.width, root.height - self.height

			text:'Deslog'
			on_press:
				root.deslog()
			
		Tab:
		

			
<Tab>:
	id: tabbed_main
	do_default_tab: False
	TabbedPanelItem:
		id:tabbed_docs
		text:'Docs'	

		FloatLayout:
			AccordionArea:	
			FloatArea:
					
	TabbedPanelItem:
		id:confis
		text:'Configs'
		

<AccordionArea@Accordion>:
	id:acc_options_bar
	size_hint: None, None
	size: 300, 900
	orientation: 'vertical'
		
	AccordionItem:
		id:acc_docs
		title:'Painel 1'
		collapse: False						
		orientation: 'vertical'
		
		ScrollView:
			Table:
				id:table_buttons
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
				always_overscroll: False
				
	AccordionItem:
		id:acc_panel
		title:'Panel 2'
	


<FloatArea@FloatLayout>:
	size_hint: None, None
	size: 980, 900
	pos: 300, 0
	
	canvas.before:
		Color:
			rgba: 1, 1, 1, 1
		Rectangle:
			pos: self.pos
			size:self.size
			
			
	FloatAreaButtons:
		text_input: text_input
		size_hint: None, None
		size: root.size[0], 40
		pos:root.pos[0], root.size[1] - self.height
		cols: 3
		
		BoxLayout:
			orientation: 'vertical'
			BoxLayout:
				size_hint_y: None
				height: 30
				
				Button:
					text: 'Download'
					on_press: 
						#self.parent.download()
						root.children[1].show_save()
				#Button:
				#Button:
			BoxLayout:
				TextInput:
					id: text_input
					text: ''
					
				RstDocument:
					text: text_input.text
					show_errors: True
					
	BoxLayout:		
		size_hint: None, None
		size: root.size[0], (root.size[1]  - root.children[1].size[1]) + 60
		
		pos: root.pos
		padding: 50, 50, 50, 0
		
		
		canvas.before:
			Color:
				rgba: 0, 0, 0, .3
			Rectangle:
				pos: self.pos
				size:self.size
				
		Page:
			#size_hint: None, None
			size: root.size
			canvas.before:
				Color:
					rgba: 1, 1, 1, 1
				Rectangle:
					pos: self.pos
					size:self.size

			Text_Label:
				size_hint: None, None


<P>:
	BoxLayout:
		pos: self.parent.pos[0] + self.parent.width - self.width - self.parent.ids.close_popup.width, self.parent.pos[1] + self.parent.height + 5

		size_hint: None, None
		size: 200, 30
		
		ToggleButton:
			size_hint: None, None
			size: self.parent.width - 100, self.parent.height
			pos: self.parent.pos[0], 100
			text: 'icone'
			state: 'down'
			group: 'filechooser'
			on_release:
				#filechooser.view_mode = 'icon'
		ToggleButton:
			size_hint: None, None
			size: self.parent.width - 100, self.parent.height
			pos: self.parent.pos[0] + self.width, self.pos[1]
			text: 'Lista'
			group:'filechooser'
			on_release: filechooser.view_mode = 'list'
		
	FileChooser:
		id: filechooser
		pos: self.parent.pos

		FileChooserIconLayout
		FileChooserListLayout
		#on_selection: text_input.text = self.selection and self.selection[0] or ''


	Button:
		id: close_popup
		text:'X'
		size_hint: None, None
		
		size: 30, 30
		pos: self.parent.pos[0] + self.parent.width - self.width, self.parent.pos[1] + self.parent.height + 5
		on_press: 
			self.parent.back(self)
			
<SaveDialog>:
    text_input: text_input
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            on_selection: text_input.text = self.selection and self.selection[0] or ''

        TextInput:
            id: text_input
            size_hint_y: None
            height: 30
            multiline: False

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Save"
                on_release: root.save(filechooser.path, text_input.text)			

<Text_Label@Label>:
	text:''
	text_size: self.parent.width, None
	size: self.texture_size

	color: 0,0,0,1
	

	